---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.18.0
  name: localqueues.kueue.x-k8s.io
spec:
  group: kueue.x-k8s.io
  names:
    kind: LocalQueue
    listKind: LocalQueueList
    plural: localqueues
    shortNames:
    - queue
    - queues
    - lq
    singular: localqueue
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Backing ClusterQueue
      jsonPath: .spec.clusterQueue
      name: ClusterQueue
      type: string
    - description: Number of pending workloads
      jsonPath: .status.pendingWorkloads
      name: Pending Workloads
      type: integer
    - description: Number of admitted workloads that haven't finished yet.
      jsonPath: .status.admittedWorkloads
      name: Admitted Workloads
      type: integer
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: |-
          LocalQueue is the Schema for the localQueues API
          LocalQueue 是 localQueues API 的架构
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: LocalQueueSpec 定义了 LocalQueue 的期望状态
            properties:
              clusterQueue:
                description: clusterQueue 是指向支持此 localQueue 的 clusterQueue 的引用。
                maxLength: 253
                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                type: string
                x-kubernetes-validations:
                - message: field is immutable
                  rule: self == oldSelf
              fairSharing:
                description: fairSharing 定义了 LocalQueue 在参与 AdmissionFairSharing 时的属性。仅当
                  Kueue 配置中启用 AdmissionFairSharing 时，这些值才有意义。
                properties:
                  weight:
                    anyOf:
                    - type: integer
                    - type: string
                    default: 1
                    description: |-
                      weight 为该 ClusterQueue 或 Cohort 在 Cohort 中争夺未使用资源时提供比较优势。
                      份额基于每种资源超出名义配额的主导资源使用量，除以权重。
                      调度优先考虑来自份额最低的 ClusterQueue 和 Cohort 的工作负载，并抢占份额最高的。
                      权重为零意味着份额值为无穷大，这意味着该节点在与其他 ClusterQueue 和 Cohort 竞争时总是处于劣势。
                    pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                    x-kubernetes-int-or-string: true
                type: object
              stopPolicy:
                default: None
                description: |-
                  stopPolicy - 如果设置为非 None 的值，则 LocalQueue 被视为非活动状态，不会进行新的预留。
                  根据其值，相关的工作负载将：
                  - None - 工作负载被接纳
                  - HoldAndDrain - 已接纳的工作负载会被驱逐，预留中的工作负载会取消预留
                  - Hold - 已接纳的工作负载会运行至完成，预留中的工作负载会取消预留
                enum:
                - None
                - Hold
                - HoldAndDrain
                type: string
            type: object
          status:
            description: |-
              LocalQueueStatus defines the observed state of LocalQueue
              LocalQueueStatus 定义了 LocalQueue 的观测状态
            properties:
              admittedWorkloads:
                description: |-
                  admittedWorkloads is the number of workloads in this LocalQueue
                  admitted to a ClusterQueue and that haven't finished yet.
                  admittedWorkloads 是此 LocalQueue 中已被接纳到 ClusterQueue 且尚未完成的工作负载数量。
                format: int32
                type: integer
              conditions:
                description: |-
                  Conditions hold the latest available observations of the LocalQueue
                  current state.
                  Conditions 保存了 LocalQueue 当前状态的最新可用观测信息。
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              fairSharing:
                description: |-
                  FairSharing contains the information about the current status of fair sharing.
                  FairSharing 包含有关当前公平共享状态的信息。
                properties:
                  admissionFairSharingStatus:
                    description: admissionFairSharingStatus 表示与 Admission Fair Sharing
                      相关的信息
                    properties:
                      consumedResources:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: |-
                          ConsumedResources 表示资源随时间的聚合使用量，应用了衰减函数。
                          如果在 Kueue 配置中启用了使用量消耗功能，则会填充值。
                        type: object
                      lastUpdate:
                        description: LastUpdate 是份额和已消耗资源被更新的时间。
                        format: date-time
                        type: string
                    required:
                    - consumedResources
                    - lastUpdate
                    type: object
                  weightedShare:
                    description: |-
                      WeightedShare 表示节点所提供的所有资源中，超出名义配额的使用量与 Cohort 可借用资源的比值的最大值，再除以权重。
                      如果为零，表示节点的使用量低于名义配额。如果节点权重为零且正在借用，则返回 9223372036854775807，即最大可能的份额值。
                    format: int64
                    type: integer
                required:
                - weightedShare
                type: object
              flavorUsage:
                description: |-
                  flavorsUsage are the used quotas, by flavor currently in use by the
                  workloads assigned to this LocalQueue.
                  flavorsUsage 是分配给此 LocalQueue 的工作负载当前使用的 flavor 的已用配额。
                items:
                  properties:
                    name:
                      description: |-
                        name of the flavor.
                        flavor 的名称。
                      maxLength: 253
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    resources:
                      description: |-
                        resources lists the quota usage for the resources in this flavor.
                        resources 列出了此 flavor 中资源的配额使用情况。
                      items:
                        properties:
                          name:
                            description: |-
                              name of the resource.
                              资源的名称。
                            type: string
                          total:
                            anyOf:
                            - type: integer
                            - type: string
                            description: |-
                              total is the total quantity of used quota.
                              total 是已用配额的总量。
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                        required:
                        - name
                        type: object
                      maxItems: 16
                      type: array
                      x-kubernetes-list-map-keys:
                      - name
                      x-kubernetes-list-type: map
                  required:
                  - name
                  - resources
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              flavors:
                description: |-
                  flavors lists all currently available ResourceFlavors in specified ClusterQueue.
                  flavors 列出了指定 ClusterQueue 中当前可用的所有 ResourceFlavor。
                items:
                  properties:
                    name:
                      description: |-
                        name of the flavor.
                        flavor 的名称。
                      maxLength: 253
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    nodeLabels:
                      additionalProperties:
                        type: string
                      description: |-
                        nodeLabels are labels that associate the ResourceFlavor with Nodes that
                        have the same labels.
                        nodeLabels 是将 ResourceFlavor 与具有相同标签的节点关联的标签。
                      maxProperties: 8
                      type: object
                      x-kubernetes-map-type: atomic
                    nodeTaints:
                      description: |-
                        nodeTaints are taints that the nodes associated with this ResourceFlavor
                        have.
                        nodeTaints 是与此 ResourceFlavor 关联的节点所具有的污点。
                      items:
                        description: |-
                          The node this Taint is attached to has the "effect" on
                          any pod that does not tolerate the Taint.
                        properties:
                          effect:
                            description: |-
                              Required. The effect of the taint on pods
                              that do not tolerate the taint.
                              Valid effects are NoSchedule, PreferNoSchedule and NoExecute.
                            type: string
                          key:
                            description: Required. The taint key to be applied to
                              a node.
                            type: string
                          timeAdded:
                            description: |-
                              TimeAdded represents the time at which the taint was added.
                              It is only written for NoExecute taints.
                            format: date-time
                            type: string
                          value:
                            description: The taint value corresponding to the taint
                              key.
                            type: string
                        required:
                        - effect
                        - key
                        type: object
                      maxItems: 8
                      type: array
                      x-kubernetes-list-type: atomic
                    resources:
                      description: |-
                        resources used in the flavor.
                        flavor 中使用的资源。
                      items:
                        description: ResourceName is the name identifying various
                          resources in a ResourceList.
                        type: string
                      maxItems: 16
                      type: array
                      x-kubernetes-list-type: set
                    topology:
                      description: |-
                        topology is the topology that associated with this ResourceFlavor.

                        This is an alpha field and requires enabling the TopologyAwareScheduling
                        feature gate.

                        topology 是与此 ResourceFlavor 关联的拓扑。
                        这是一个 alpha 字段，需要启用 TopologyAwareScheduling 特性门控。
                      properties:
                        levels:
                          description: |-
                            levels define the levels of topology.

                            levels 定义了拓扑的层级。
                          items:
                            type: string
                          maxItems: 8
                          minItems: 1
                          type: array
                          x-kubernetes-list-type: atomic
                        name:
                          description: |-
                            name is the name of the topology.

                            name 是拓扑的名称。
                          maxLength: 253
                          pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                          type: string
                      required:
                      - levels
                      - name
                      type: object
                  required:
                  - name
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              flavorsReservation:
                description: |-
                  flavorsReservation are the reserved quotas, by flavor currently in use by the
                  workloads assigned to this LocalQueue.
                  flavorsReservation 是分配给此 LocalQueue 的工作负载当前使用的 flavor 的预留配额。
                items:
                  properties:
                    name:
                      description: |-
                        name of the flavor.
                        flavor 的名称。
                      maxLength: 253
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                      type: string
                    resources:
                      description: |-
                        resources lists the quota usage for the resources in this flavor.
                        resources 列出了此 flavor 中资源的配额使用情况。
                      items:
                        properties:
                          name:
                            description: |-
                              name of the resource.
                              资源的名称。
                            type: string
                          total:
                            anyOf:
                            - type: integer
                            - type: string
                            description: |-
                              total is the total quantity of used quota.
                              total 是已用配额的总量。
                            pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                            x-kubernetes-int-or-string: true
                        required:
                        - name
                        type: object
                      maxItems: 16
                      type: array
                      x-kubernetes-list-map-keys:
                      - name
                      x-kubernetes-list-type: map
                  required:
                  - name
                  - resources
                  type: object
                maxItems: 16
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              pendingWorkloads:
                description: |-
                  PendingWorkloads is the number of Workloads in the LocalQueue not yet admitted to a ClusterQueue
                  PendingWorkloads 是 LocalQueue 中尚未被接纳到 ClusterQueue 的工作负载数量
                format: int32
                type: integer
              reservingWorkloads:
                description: |-
                  reservingWorkloads is the number of workloads in this LocalQueue
                  reserving quota in a ClusterQueue and that haven't finished yet.
                  reservingWorkloads 是此 LocalQueue 中正在 ClusterQueue 预留配额且尚未完成的工作负载数量。
                format: int32
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
